@defer (when !isLoading()){
<img [src]="book.cover" class="book-background" />
<div class="book">
	<div class="book-header">
		<div class="book-cover">
			<img [src]="book.cover" />
		</div>
		<div class="book-info">
			<div class="top">
				<h1>{{ book.title }}</h1>
				<h6>
					{{ getAuthorNames() }}
				</h6>
			</div>
			<div class="bottom">
				<div *ngIf="admin" class="admin-actions">
					<button (click)="resetBook()">Resetar</button>
					<button (click)="fixBook()">Corrigir</button>
				</div>
				<div class="caps">{{ getMaxChapterIndex() }} Capitulos</div>
				<div class="release">Lan√ßamento {{ book.publication }}</div>
			</div>
		</div>
	</div>
	<div class="book-info-plus">
		<div class="tags">
			@for(content of book.sensitiveContent; track content) {
			<span class="sensitive">{{ content.name }}</span>
			} @for(tag of book.tags; track tag.name) {
			<span class="tag">{{ tag.name }}</span>
			}
		</div>
		<p class="book-description">{{ book.description }}</p>
	</div>
</div>
<div class="chapters">
	@for(chapter of book.chapters; track chapter.id) {
	<a [routerLink]="[chapter.id]" class="chapter">
		<div class="title">
			<h2>capitulo {{ chapter.index | number }}</h2>
			@if(chapter.title){
			<h3>{{ chapter.title }}</h3>
			}
		</div>
		<div class="metadata">
			<div class="read">
				<app-icons
					[name]="chapter.read ? 'eye' : 'eye-close'"
					[ngClass]="{ read: chapter.read }"
				/>
			</div>
			<div
				class="scraping-status"
				[ngClass]="{
					scrapingStatusReady:
						chapter.scrapingStatus === ScrapingStatus.READY,
					scrapingStatusProcessing:
						chapter.scrapingStatus === ScrapingStatus.PROCESSING,
					scrapingStatusError:
						chapter.scrapingStatus === ScrapingStatus.ERROR
				}"
			>
				{{ getScrapingStatusClass(chapter.scrapingStatus) }}
			</div>
		</div>
	</a>
	}
</div>
} @placeholder {
<div class="book-background placeholder-background"></div>
<div class="book">
	<div class="book-header">
		<div class="book-cover placeholder"></div>
		<div class="book-info">
			<div class="top">
				<h1 class="placeholder"></h1>
				<h6 class="placeholder"></h6>
			</div>
			<div class="bottom">
				<div class="caps placeholder"></div>
				<div class="release placeholder"></div>
			</div>
		</div>
	</div>
	<div class="book-info-plus">
		<div class="tags">
			@for (i of [].constructor(5); track i) {
			<span class="placeholder"></span>
			}
		</div>
		<p class="book-description placeholder"></p>
	</div>
</div>
<div class="chapters">
	@for (i of [].constructor(4); track i) {
	<div class="placeholder"></div>
	}
</div>
}
